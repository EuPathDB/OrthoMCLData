OrthoMCL User's Guide
Version ??

=========== Introduction ==========================

The OrthoMCL Algorithm is described here: http://docs.google.com/Doc?id=dd996jxg_1gsqsp6

The basic input is a set of proteomes and an all-v-all BLAST among them.  

The output is a set of files:
  pregroupingRelationships/
     orthologs.txt
     coorthologs.txt
     inparalogs.txt
  groups.txt

The pregroupingRelationships files contain the pairwise relationships between proteins, and their scores, categorized into orthologs, co-orthologs and inparalogs as defined in the OrthoMCL Algorithm.

The groups.txt file contains the final groups.

The OrthoMCL algorithm runs in a relational database.  Supported vendors are:
  - Oracle
  - MySql

Using OrthoMCL entails a series of steps.  Most of these are simple, and entail running a provided program.  All programs except mysql and mcl are provided as part of the OrthoMCL download.

The provided programs all begin with 'orthomcl' and all will provide help if called with no arguments.

=========== Overview of steps =======================

There are 12 steps, but most are trivial to run, so don't be discouraged.

(1) install or get access to a supported relational database.  If using MySql, a specific installation configuration is required, so it may require installing your own MySql, which is straightforward.

(2) download and install the mcl program according to provided instructions.

(3) run orthomclAdjustFasta (or your own simple script) to generate protein fasta files in the required format

(4) run orthomclFilterFasta to filter poor quality proteins, and optionally remove alternative proteins. Creates a single large goodProteins.fasta file (and a rejectProteins.fasta file)

(5) run all-v-all NCBI BLAST on goodProteins.fasta (output format is tab delimited text)

(6) run orthomclBlastParser on NCBI BLAST tab output to create file of similarities in required format

(7) run orthomclInstallSchema to install the required schema into the database

(8) run orthomclLoadBlastResults to bulk load the output of orthomclBlastParser into the SimilarSequences table.

(9) configure and run the orthomclEdges program to compute pairwise relationships

(10) run the orthomclEdgesDumpFiles program to dump files from the database

(11) run the mcl program on file created in step 11.

(12) run orthomclMclToGroups to convert mcl output to groups.txt


========== Step 1: MySql ============


========== Step 2: install mcl ==========


========== Step 3: orthomclAdjustFasta ==========

This step prepares a set of protein fasta files required by the next step.  There are two requirements:
  1) each .fasta file must have a name in the form 'xxxx.fasta' where xxxx is a three or four letter unique taxon code.  For example: hsa.fasta or eco.fasta
  2) each protein in those files must have a definition line in the following format:
     >xxxx|yyyyyyyy
     where xxxx is the three or four letter taxon code and yyyyyyy is a sequence identifier unique within that taxon.

We provide the convenience program orthomclAdjustFasta that takes a GenBank style fasta file and produces the required file.  If your fasta files don't work with this program, write a simple script to produce compliant fasta files.


======== Step 4: orthomclFilterFasta ===========

This step takes a set of compliant fasta files in a directory and produces two files:
  - goodProteins.fasta (used in Step 5)
  - rejectProteins.fasta (for your reference)


