#!/usr/bin/perl

my ($prefix, $startId) = @ARGV;

&usage unless ($prefix && ($startId =~ /\d+/));

my @group;
while (<STDIN>) {
  if (!/^\t/ && scalar(@group)) {
    print "$prefix$startId: " . join(" ", @group) . "\n";
    $startId++;
    @group = ();
  }
  push(@group, split(/\s+/));
}

sub usage {
  print "
mclOutput2groupsFile prefix starting_id_num

create an orthomcl groups file from an mcl output file; generate a group ID for each group.

where:
 prefix           a prefix to use when generating group ids.  For example OG2_
 starting_id_num  a number to start the id generating with.  For example 1000

std input:  mcl output file (label mode)
std output: orthomcl groups file

an mcl output file has multiple lines per group, with each line being a list of labels (ids).  the first line of a group has no leading tabs.  subsequent lines of the group have a leading tab.

an orthomcl group file has one line per group and looks like this:

OG2_1009: osa|ENS1222992 pfa|PF11_0844


";
  exit(1);
}
